<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>数据中心使用情况统计</title>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style> table { border-collapse: collapse; width: 50%; }
    th, td {
      padding: 3px;
      text-align: left;
      border-bottom: 1px solid #827f7f;
      font-size: 12px;
    }
    
    th {
      background-color: #f2f2f2;
    }
    </style>
</head>
<body>
  数据中心各部门使用情况统计<br><br>
  <table id="myTable">
    <thead>
      <tr>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <script>
    // 获取 URL 中的参数
    const urlParams = new URLSearchParams(window.location.search);

    // 构造 API 地址
    const apiUrl = `/sjzx`;

    
    $.ajax({
      url: apiUrl,
      dataType: 'json',
      success: function(data) {
        console.log(data);
          var tableHeaders = Object.keys(data[0]);
          var tableRows = '';
          for (var i = 0; i < tableHeaders.length; i++) {
            $('thead tr').append('<th>' + tableHeaders[i] + '</th>');
          }
          for (var j = 0; j < data.length; j++) {
            var rowData = Object.values(data[j]);
            tableRows += '<tr>';
            for (var k = 0; k < rowData.length; k++) {
                if(k==0){
                  tableRows += '<td>' + rowData[k] + '</td>';
                }else{
                  tableRows += '<td>' + rowData[k] + '</td>';
                }
            }
            tableRows += '</tr>';
          }
        $('tbody').append(tableRows);
      },
      error: function(error) {
        console.log('获取数据失败:', error);
      }
    });



  </script>
</body>
</html>