<!--
    使用说明：
    1 .引入路由和axios
        <script src="https://cdn.bootcss.com/vue-router/3.1.5/vue-router.min.js"></script>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    2 https://form.making.link/sample/ 生成表单
    3 复制此页面，用FormMaking生成表单jsonData后，粘贴到对应位置即可
    4 修改axios.post('/xx')的路由地址
-->

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="https://form.making.link/public/lib/form-making/dist/FormMaking.css">
</head>
<body>
    <div id="app">
    <fm-generate-form
        :data="jsonData" 
        :remote="remoteFuncs" 
        :value="editData" 
        :remote-option="dynamicData"
        ref="generateForm"
    >
    </fm-generate-form>
    <el-button type="primary" @click="handleSubmit">Submit</el-button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <script src="https://cdn.bootcss.com/vue-router/3.1.5/vue-router.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="https://form.making.link/public/lib/form-making/dist/FormMaking.umd.js"></script>
    <script>
    const router = new VueRouter({});
    new Vue({
    el: '#app',
    data: {   
        // 把formmaking生成好的代码拷贝过来，复制这个页面，拷贝jsonData就好
        jsonData: {"list":[{"type":"input","icon":"icon-input","options":{"width":"","defaultValue":"","required":true,"requiredMessage":"","dataType":"","dataTypeCheck":false,"dataTypeMessage":"","pattern":"","patternCheck":false,"patternMessage":"","validatorCheck":true,"validator":"","placeholder":"aadd","customClass":"","disabled":false,"labelWidth":100,"isLabelWidth":false,"hidden":false,"dataBind":true,"showPassword":false,"remoteFunc":"func_b37autnf","remoteOption":"option_b37autnf","tableColumn":false,"hideLabel":false},"events":{"onChange":"","onFocus":"","onBlur":""},"name":"单行文本","key":"b37autnf","model":"input_b37autnf","rules":[{"required":true,"message":"必须填写"}]},{"type":"textarea","icon":"icon-diy-com-textarea","options":{"width":"","defaultValue":"","required":false,"requiredMessage":"","disabled":false,"pattern":"","patternMessage":"","validatorCheck":false,"validator":"","placeholder":"","customClass":"","labelWidth":100,"isLabelWidth":false,"hidden":false,"dataBind":true,"remoteFunc":"func_nm14yu9e","remoteOption":"option_nm14yu9e","tableColumn":false},"events":{"onChange":"","onFocus":"","onBlur":""},"name":"多行文本","key":"nm14yu9e","model":"textarea_nm14yu9e","rules":[]},{"type":"rate","icon":"icon-pingfen1","options":{"defaultValue":0,"max":5,"disabled":false,"allowHalf":false,"required":false,"requiredMessage":"","validatorCheck":false,"validator":"","customClass":"","labelWidth":100,"isLabelWidth":false,"hidden":false,"dataBind":true,"showScore":false,"remoteFunc":"func_sgfohrao","remoteOption":"option_sgfohrao","tableColumn":false},"events":{"onChange":""},"name":"评分","key":"sgfohrao","model":"rate_sgfohrao","rules":[]},{"type":"slider","icon":"icon-slider","options":{"defaultValue":56,"disabled":false,"required":false,"requiredMessage":"","validatorCheck":false,"validator":"","min":0,"max":100,"step":1,"showInput":false,"range":false,"width":"","customClass":"","labelWidth":100,"isLabelWidth":false,"hidden":false,"dataBind":true,"remoteFunc":"func_4q04wcya","remoteOption":"option_4q04wcya","tableColumn":false},"events":{"onChange":""},"name":"滑块","key":"4q04wcya","model":"slider_4q04wcya","rules":[]}],"config":{"labelWidth":100,"labelPosition":"right","size":"small","customClass":"","ui":"element","layout":"horizontal","labelCol":3,"width":"100%","hideLabel":false,"hideErrorMessage":false,"eventScript":[{"key":"mounted","name":"mounted","func":""}],"dataSource":[{"key":"upload","name":"Get Upload Token","url":"https://tools-server.making.link/api/uptoken","method":"GET","auto":true,"responseFunc":"return res.uptoken;"},{"key":"getoptions","name":"Get Options","url":"https://tools-server.making.link/api/new/options","method":"GET","auto":true,"responseFunc":"return res.data;"}],"platform":"pc"}},
        editData: {},
        remoteFuncs: {
        },
        dynamicData: {
        }
    },
    methods: {
        handleSubmit () {
            this.$refs.generateForm.getData().then(data => {
                //axios的post地址自己定义，然后测试
                axios.post('/add', data).then((res) => {
                    console.log(res);
                    this.$message({ message: /*JSON.stringify(res.data) */  '操作成功！',type: 'success' });
                    // router.push('us'); //不行，还得测
                })
            }).catch(e => {
                // Data verification failed
            })
        }
    }
    })
</script>
</body>
</html>